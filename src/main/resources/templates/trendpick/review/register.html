<!DOCTYPE html>
<html layout:decorate="~{trendpick/usr/layout/layout.html}" xmlns:layout="http://www.w3.org/1999/xhtml">
  <head>
    <title>리뷰 등록</title>
  </head>
  <main layout:fragment="main" class="flex-grow flex items-center justify-center">

    <script>
      function JoinForm__submit(form) {

        form.title.value = form.title.value.trim();

        if (form.title.value.length === 0) {
          toastWarning('제목을 입력해주세요.');
          form.title.focus();
          return;
        }

        form.content.value = form.content.value.trim();

        if (form.content.value.length === 0) {
          form.content.focus();
          toastWarning('내용을 입력해주세요.');
          return;
        }

        form.mainFile.value = form.mainFile.value.trim();

        if (form.mainFile.value.length === 0) {
          toastWarning('메인 사진을 입력해주세요.');
          form.mainFile.focus();
          return;
        }

        form.subFiles.value = form.subFiles.value.trim();

        if (form.subFiles.value.length === 0) {
          toastWarning('메인 사진을 입력해주세요.');
          form.subFiles.focus();
          return;
        }

        form.rating.value = form.rating.value.trim();

        if (form.rating.value.length === 0) {
          toastWarning('별점을 입력해주세요.');
          form.rating.focus();
          return;
        }

        form.submit(); // 폼 발송
      }
    </script>

    <div class="w-full px-4">
      <form th:action onsubmit="JoinForm__submit(this); return false;" th:object="${reviewSaveRequest}" method="post"
            enctype="multipart/form-data" class="flex flex-col gap-6">

        <div class="form-control h-full">
          <label class="label">
            <span class="label-text">제목</span>
          </label>
          <div>
            <input type="text" name="title" placeholder="제목을 입력해주세요" class="input input-bordered input-accent w-full max-w-xs" autofocus/>
          </div>
        </div>

        <div class="form-control h-full">
          <label class="label">
            <span class="label-text">내용</span>
          </label>
          <input type="text" name="content" placeholder="내용" class="input input-bordered input-accent w-full max-w-xs" autofocus/>
        </div>

        <div class="form-control  h-full">
          <label class="label">
            <span class="label-text">메인 사진</span>
          </label>
          <label>
            <input type="file" id="mainFile" name="mainFile" required>
          </label>
        </div>

        <div class="form-control  h-full">
          <label class="label">
            <span class="label-text">서브 사진들</span>
          </label>
          <label>
            <input type="file" id="subFiles" name="subFiles" multiple="multiple" required>
          </label>
        </div>

        <div class="form-control  h-full">
          <label class="label">
            <span class="label-text">별점</span>
          </label>
          <select name="rating" class="input input-bordered" autofocus>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
          </select>
        </div>
        <button type="submit" class="btn btn-accent">리뷰 등록</button>
      </form>
    </div>
  </main>
</html>